name: Merge-upstream-12

on:
  # 推送代码后触发
  push:
  # 定时任务触发，使用 cron 规则
  schedule:
    - cron: '*/15 * * * *'

jobs:
  fork_upstream:
    runs-on: ubuntu-latest
    steps:
      - run:
          echo "Current time is $(date +'%Y-%m-%d %H:%M:%S')"
      # 同步  
      - name: GitHub Sync to Upstream Repository
        uses: aquelegustavo/forksync@v1.4
        with:
          UPSTREAM_USER: LuckyJumpingFrog #Example: Organization name
          UPSTREAM_REPO: TestForActions #Example: Organization repository
          FORKED_USER: computerzy #Example: Your account
          FORKED_REPO: TestForActionsForkFromFrog #Example: Your copy repository
          USER_TOKEN: ${{secrets.ACCESS_TOKEN}} #Your personal acess token
      # 检出代码
      - name: CheckoutRepo
        uses: actions/checkout@v3
      # 发送邮件
      - name: Send email
        uses: devellany/send-mail@v1.0.2
        with:
          host: smtp.sina.com
          account: ${{secrets.MAIL_USERNAME}}
          password: ${{secrets.MAIL_PASSWORD}}
          sender: zy
          from: ${{secrets.MAIL_USERNAME}}
          to: ${{secrets.MAIL_USERNAME}}
          subject: Merge-upstream-12 test ok.
          body: "this is a test for Merge-upstream-12"
          attachments: '[{"path":"README.md"}]'
